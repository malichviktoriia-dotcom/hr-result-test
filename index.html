<tr><td style="font-weight: bold; width: 140px;">Кандидат:</td><td>${userData.name}</td></tr>
<tr><td style="font-weight: bold;">Должность:</td><td>${userData.job}</td></tr>
<tr><td style="font-weight: bold;">Возраст:</td><td>${userData.age}</td></tr>
<tr><td style="font-weight: bold;">Общее время:</td><td>${userData.totalTime}</td></tr>
<tr><td style="font-weight: bold;">Дата и время:</td><td>${new Date().toLocaleString()}</td></tr>
</table>

<div style="background: #f1f5f9; padding: 10px; border-left: 3px solid #64748b; margin-bottom: 30px; font-size: 9pt;">
<strong>Комментарий для HR:</strong> В данной анкете представлены «сырые» ответы кандидата. 
Анализ должен проводиться вручную согласно установленной методике оценки.
</div>
`;

answers.forEach((a, i) => {
const formattedTime = ${Math.floor(a.seconds / 60)}:${(a.seconds % 60).toString().padStart(2, '0')};
html += `
<div style="margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 15px; page-break-inside: avoid;">
<div style="font-weight: bold; font-size: 10pt; margin-bottom: 5px;">${i+1}. ${a.qText}</div>
<div style="font-size: 8pt; color: #888; margin-bottom: 5px;">Тип: ${a.qType} | Время на ответ: ${formattedTime}</div>
<div style="background: #fff; border: 1px solid #ddd; padding: 10px; font-size: 11pt; white-space: pre-wrap;">${a.label ? a.label : a.value}</div>
</div>
`;
});

html += `
<div style="margin-top: 30px; text-align: right; font-size: 8pt; color: #999;">
Общее количество символов: ${totalSymbols} | Идентификатор сессии: ${Math.random().toString(36).substr(2, 9)}
</div>
`;

content.innerHTML = html;

const opt = {
margin: 15,
filename: anketa_${userData.name.replace(/\s+/g, '_')}.pdf,
image: { type: 'jpeg', quality: 0.98 },
html2canvas: { scale: 2 },
jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
};
html2pdf().set(opt).from(content).save();
};

</script>
</body>
</html>
